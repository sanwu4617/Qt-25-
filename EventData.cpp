#include "Event.h"
const int floor0[MAX_FLOOR][11][11]={
{                           //第1层
{3,0,11,201,202,201,0,0,0,0,0},
{1,1,1,1,1,1,1,1,1,1,0},
{51,0,301,21,0,1,51,11,51,1,0},
{11,301,101,1,0,1,51,11,51,1,0},
{1,21,1,1,0,1,1,1,203,1,0},
{11,302,0,1,0,21,351,201,251,1,0},
{102,0,12,1,0,1,1,1,1,1,0},
{1,21,1,1,0,0,0,0,0,0,0},
{0,302,0,1,1,23,1,1,1,21,1},
{51,52,11,1,13,0,0,1,11,401,12},
{51,52,11,1,0,0,0,1,11,11,11}},
{                           //第2层
{4,1,105,1,106,1,13,11,54,102,101},
{0,1,103,1,104,1,12,11,54,102,101},
{0,1,101,1,102,1,12,11,54,102,101},
{0,1,0,1,0,1,1,1,1,1,23},
{0,1,22,1,22,1,0,0,0,0,0},
{0,24,0,0,0,0,0,1,1,552,1},
{0,1,22,1,1,452,1,1,0,0,0},
{0,1,0,1,0,0,0,1,552,1,552},
{0,1,11,1,53,53,53,1,0,1,0},
{0,1,12,1,101,101,101,1,0,1,0},
{3,1,13,1,102,102,102,1,113,1,123}},
{                           //第3层
{111,202,11,1,101,53,102,1,1,1,1},
{202,11,0,1,0,252,0,1,0,251,0},
{11,301,0,1,1,21,1,1,0,1,0},
{1,21,1,1,0,301,0,1,11,1,202},
{0,0,0,1,1,1,0,1,11,1,251},
{201,1,0,251,202,251,0,1,11,1,202},
{201,1,1,1,1,1,0,0,0,1,0},
{0,0,0,0,0,1,1,21,1,1,0},
{1,1,1,1,0,1,202,0,202,1,0},
{1,0,0,0,0,1,102,251,11,1,0},
{4,0,1,1,1,1,101,52,11,1,3}},
{                           //第4层
{0,203,0,1,0,14,0,1,0,203,0},
{0,1,0,1,0,0,0,1,0,1,0},
{0,1,301,1,1,23,1,1,301,1,0},
{251,1,51,1,303,0,303,1,51,1,251},
{251,1,52,1,103,303,104,1,52,1,251},
{202,1,0,1,1,22,1,1,0,1,202},
{0,1,0,1,401,0,401,1,0,1,0},
{0,1,0,1,101,401,102,1,0,1,0},
{0,1,0,1,1,21,1,1,0,1,0},
{0,1,0,1,0,0,0,1,0,1,0},
{3,1,0,203,0,0,0,203,0,1,4}},
{                           //第5层
{13,1,52,1,53,351,0,0,351,11,12},
{0,1,101,1,351,0,0,0,0,351,11},
{252,1,0,1,302,0,1,1,21,1,1},
{0,21,302,1,121,302,1,0,401,302,12},
{252,1,0,1,1,1,1,0,0,0,302},
{103,1,0,0,0,251,301,0,0,0,0},
{104,1,1,203,1,1,1,1,0,0,0},
{0,54,1,203,1,0,0,0,401,451,0},
{1,1,1,251,1,21,1,22,1,21,1},
{0,0,1,0,1,251,1,102,21,0,1},
{4,0,251,0,0,0,1,11,1,3,1}},
{                           //第6层
{152,303,1,106,1,11,204,151,1,52,52},
{303,11,1,105,1,0,11,204,1,501,52},
{11,253,22,0,22,253,0,11,1,0,501},
{0,0,1,451,1,0,0,0,1,372,0},
{1,1,1,23,1,1,1,1,1,21,1},
{0,0,352,0,0,0,0,0,352,0,0},
{0,1,1,1,1,1,1,1,1,1,1},
{0,1,252,21,252,0,0,0,0,0,1},
{0,1,21,1,21,1,1,1,1,22,1},
{0,1,252,1,0,0,1,1,0,0,1},
{0,0,0,1,3,0,21,21,0,4,1}},
{                           //第7层
{3,0,0,0,0,0,0,0,1,1,1},
{1,1,0,253,1,22,1,303,0,1,1},
{1,0,253,104,1,901,1,103,303,0,1},
{0,0,1,1,1,951,1,1,1,0,0},
{0,0,22,901,951,115,951,901,22,0,0},
{0,1,1,1,1,951,1,1,1,1,0},
{0,1,51,103,1,901,1,104,51,1,0},
{0,1,11,51,1,22,1,51,11,1,0},
{0,1,1,12,12,52,12,12,1,1,0},
{0,0,1,1,1,23,1,1,1,0,0},
{1,0,0,0,4,0,0,0,0,0,1}},
{                           //第8层
{4,1,0,0,0,0,1,0,0,303,0},
{0,1,0,1,1,21,1,21,1,1,0},
{0,1,0,1,0,0,22,0,0,1,103},
{0,1,0,1,371,1,1,1,252,1,203},
{252,1,0,1,52,1,3,0,0,1,203},
{253,1,104,1,52,1,1,1,1,1,0},
{252,1,203,1,0,0,0,1,0,253,0},
{13,1,203,1,1,1,451,1,21,1,1},
{0,1,0,303,0,1,303,1,0,0,0},
{0,1,1,1,21,1,0,1,1,1,0},
{0,0,371,0,0,1,0,204,354,204,0}},
{                           //第9层
{55,11,0,1,1,1,0,0,0,1,0},
{11,0,402,21,0,0,0,1,0,21,303},
{1,21,1,1,0,1,1,1,0,1,11},
{0,0,0,1,0,1,103,0,0,1,11},
{0,0,0,23,0,1,4,1,0,1,52},
{1,22,1,1,0,1,1,1,0,1,1},
{104,372,103,1,371,1,3,1,0,1,52},
{1,21,1,1,0,0,104,21,0,1,11},
{303,52,303,1,1,22,1,1,0,1,11},
{12,303,52,1,501,371,501,1,0,21,303},
{112,12,303,21,53,501,53,1,0,1,0}},
{                           //第10层
{0,1,1,103,402,1,402,104,1,1,0},
{0,0,1,1,21,1,21,1,1,0,372},
{0,0,0,0,0,1,0,0,0,372,53},
{0,1,0,1,1,1,1,1,0,1,1},
{252,1,0,0,11,11,11,0,0,1,11},
{253,1,0,1,1,1,1,21,1,1,11},
{252,1,0,0,0,0,4,0,21,253,0},
{0,1,1,1,1,1,1,21,1,1,0},
{0,1,54,104,103,1,0,253,0,1,11},
{0,1,54,104,103,23,371,1,371,1,11},
{3,1,54,104,103,1,12,1,12,1,52}},
{                           //第11层
{52,1,11,1,12,1,13,1,54,122,54},
{52,1,11,1,12,1,13,1,452,452,452},
{52,1,11,1,12,1,13,1,0,452,0},
{21,1,21,1,21,1,21,1,1,22,1},
{0,0,0,0,0,1,0,0,0,0,0},
{21,1,1,22,1,1,1,22,1,1,21},
{102,1,0,452,0,551,0,452,0,1,101},
{102,1,402,1,1,1,1,1,402,1,101},
{104,1,402,1,54,13,54,1,402,1,103},
{1,1,23,1,1,204,1,1,23,1,1},
{4,0,0,0,0,0,0,0,0,0,3}},
{                           //第12层
{152,104,1,0,552,553,552,0,1,54,151},
{103,551,1,0,1,21,1,0,1,551,54},
{551,0,1,0,1,553,1,0,1,0,551},
{0,0,1,0,1,11,1,0,1,0,0},
{0,0,1,0,1,11,1,0,1,0,0},
{1,22,1,0,1,11,1,0,1,22,1},
{0,0,0,0,1,12,1,0,0,0,0},
{1,1,1,0,1,1,1,0,1,1,1},
{105,551,21,0,452,0,452,0,21,551,106},
{1,1,1,1,1,22,1,1,1,1,1},
{3,0,0,0,0,0,0,0,0,0,4}},
{                           //第13层
{0,551,0,0,0,0,0,1,0,601,0},
{0,1,1,1,1,1,21,1,0,1,0},
{0,1,0,0,452,0,0,1,0,1,0},
{54,1,23,1,1,1,0,1,103,1,0},
{552,1,0,0,602,1,452,1,103,1,0},
{553,1,0,602,55,1,452,1,103,1,104},
{552,1,602,55,151,1,452,1,103,1,104},
{0,1,1,1,1,1,0,1,0,1,104},
{53,552,0,1,0,0,0,601,0,1,104},
{1,1,0,1,0,1,1,1,1,1,0},
{4,0,0,22,0,3,1,152,602,21,0}},
{                           //第14层
{0,0,0,1,105,0,21,0,1,12,55},
{0,124,0,1,0,552,1,602,1,0,0},
{0,0,0,1,21,1,1,0,21,0,0},
{1,952,1,1,0,254,1,1,1,1,601},
{902,0,902,1,602,0,21,353,103,1,0},
{0,0,0,1,1,1,1,0,402,1,0},
{55,0,0,254,0,0,21,601,104,1,0},
{1,22,1,1,1,1,1,1,1,1,254},
{0,254,0,601,21,0,0,0,0,0,0},
{12,0,0,0,1,0,1,1,21,1,0},
{11,11,11,11,1,4,1,54,372,1,3}},
{                           //第15层
{107,601,0,1,11,105,11,1,0,601,108},
{1,1,601,1,0,1,0,1,601,1,1},
{0,254,0,1,353,0,353,1,0,353,0},
{21,1,1,1,1,21,1,1,1,1,0},
{0,353,0,21,0,602,0,1,54,0,254},
{1,1,1,1,55,0,353,21,0,106,0},
{11,11,0,1,0,55,0,1,11,0,601},
{11,12,0,1,1,1,1,1,22,1,21},
{0,0,602,1,151,0,152,1,552,0,601},
{1,1,21,1,1,453,1,1,1,0,1},
{3,0,0,552,0,0,0,552,0,0,4}},
{                           //第16层
{11,11,11,1,55,11,106,1,11,14,11},
{11,0,0,1,553,1,601,1,0,11,0},
{1,21,1,1,0,1,0,1,0,356,0},
{0,553,0,1,21,1,22,1,1,22,1},
{0,0,0,254,0,502,0,254,0,0,54},
{602,0,53,1,1,21,1,1,0,601,0},
{21,1,1,1,0,0,0,1,21,1,21},
{0,601,0,254,0,0,0,601,0,1,0},
{1,1,21,1,1,21,1,1,553,1,353},
{0,0,372,1,105,55,106,1,105,1,0},
{4,0,0,1,0,3,0,1,106,1,12}},
{                           //第17层
{103,0,104,1,0,3,0,1,105,0,106},
{0,114,0,1,0,0,0,1,0,55,0},
{103,0,104,1,254,1,551,1,11,0,11},
{1,954,1,1,0,1,0,1,1,956,1},
{904,0,904,1,21,1,22,1,906,0,906},
{0,0,0,1,0,1,0,1,0,0,0},
{1,953,1,1,601,1,372,1,1,955,1},
{903,0,903,1,0,0,0,1,905,0,905},
{0,0,0,1,1,353,1,1,0,0,0},
{1,21,1,1,0,0,0,1,1,21,1},
{54,0,0,254,0,4,0,254,0,0,54}},
{                           //第18层
{0,0,107,108,1,4,1,0,0,254,151},
{304,0,105,106,1,0,1,403,0,0,254},
{0,553,1,1,1,0,1,21,1,553,553},
{0,0,21,12,1,601,1,12,1,0,0},
{21,1,1,1,1,0,1,1,1,1,21},
{0,553,0,601,0,56,0,601,0,553,0},
{21,1,1,1,1,0,1,1,1,1,21},
{0,0,1,12,1,601,1,12,21,0,0},
{553,553,1,21,1,0,1,1,1,502,0},
{254,0,0,602,1,0,1,106,105,0,304},
{152,254,0,0,1,3,1,108,107,0,0}},
{                           //第19层
{3,0,0,1,107,56,108,1,107,56,108},
{0,0,353,1,11,11,11,1,0,0,0},
{1,1,21,1,0,0,0,1,1,957,1},
{0,0,0,1,1,554,1,1,908,0,907},
{0,0,353,21,0,0,0,21,356,0,0},
{21,1,1,1,1,601,1,1,0,0,0},
{0,0,0,1,0,0,0,1,1,0,1},
{1,1,304,1,105,0,106,1,908,0,907},
{56,11,11,1,1,254,1,1,1,957,1},
{304,1,1,1,0,0,0,1,0,0,0},
{11,11,57,1,0,4,0,1,107,56,108}},
{                           //第20层
{4,0,21,0,0,0,21,21,354,0,0},
{0,0,1,1,1,554,1,1,0,1,0},
{0,0,21,0,1,0,12,1,0,1,0},
{22,1,1,304,1,107,108,1,125,1,356},
{0,356,0,0,1,1,1,1,1,1,21},
{0,1,21,1,1,56,554,21,0,403,0},
{0,1,554,0,0,0,0,1,403,108,403},
{21,1,1,1,1,1,1,1,0,403,0},
{304,0,1,55,0,554,0,1,1,1,21},
{0,0,1,55,1,1,0,21,304,0,304},
{3,0,1,55,0,22,0,1,55,107,55}},
{                           //第21层
{3,0,0,0,0,0,0,304,0,56,56},
{1,1,21,1,1,1,22,1,1,1,23},
{55,1,0,0,1,11,0,354,1,1,304},
{56,1,1,602,1,11,0,1,107,1,105},
{354,21,55,0,1,1,356,1,108,1,105},
{0,1,304,1,1,0,0,0,356,1,106},
{354,21,0,56,1,554,1,1,1,1,106},
{56,1,356,0,1,0,55,55,0,1,14},
{55,1,21,1,1,1,1,1,0,1,355},
{1,1,0,22,55,55,0,1,304,1,355},
{4,24,0,1,1,1,0,403,0,0,0}},
{                           //第22层
{4,0,1,107,0,0,0,108,1,11,11},
{0,0,1,0,0,1,0,0,1,0,57},
{21,1,1,0,1,153,1,0,1,21,1},
{602,0,1,0,0,701,0,0,1,0,0},
{0,0,1,0,0,1,0,0,1,354,354},
{21,1,1,0,355,0,355,0,1,0,0},
{356,0,1,1,1,22,1,1,1,1,21},
{0,0,602,0,0,0,0,0,0,0,304},
{21,1,1,1,1,403,1,1,0,0,0},
{0,1,0,21,0,0,0,1,1,1,356},
{356,56,554,1,0,3,0,21,0,554,0}},
{                           //第23层
{107,1,56,55,1,3,1,55,56,1,108},
{107,1,0,0,1,0,1,0,0,1,108},
{107,1,403,1,1,502,1,1,403,1,108},
{355,1,21,1,911,961,911,1,21,1,355},
{0,0,0,1,1,0,1,1,0,0,0},
{1,0,0,502,22,0,22,502,0,0,1},
{0,0,1,0,1,0,1,0,1,0,0},
{355,1,1,354,1,0,1,651,1,1,355},
{0,1,11,11,1,502,1,11,11,1,0},
{56,1,651,1,1,0,1,1,354,1,56},
{151,1,11,12,1,4,1,12,11,1,152}},
{                           //第24层
{3,0,58,1,1,4,1,0,22,0,0},
{1,701,1,1,1,0,1,0,1,304,1},
{57,651,0,0,1,0,1,651,1,55,0},
{1,1,1,21,1,355,1,55,1,1,403},
{502,355,0,0,1,355,1,56,1,0,56},
{0,1,1,1,1,56,1,55,1,21,1},
{0,403,21,0,1,56,1,651,1,354,0},
{1,0,1,0,1,11,1,0,1,1,355},
{1,56,1,554,1,11,21,0,1,108,0},
{1,355,1,0,1,0,1,1,1,701,1},
{1,107,1,0,21,0,1,151,151,152,152}},
{                           //第25层
{4,0,0,0,0,0,0,0,0,0,0},
{1,1,1,1,1,24,1,1,1,1,1},
{1,1,1,1,0,0,0,1,1,1,1},
{1,1,1,0,107,58,108,0,1,1,1},
{1,1,0,0,0,0,0,0,0,1,1},
{1,0,0,0,0,751,0,0,0,0,1},
{1,1,0,0,0,0,0,0,0,1,1},
{1,1,1,0,0,0,0,0,1,1,1},
{1,1,1,1,0,0,0,1,1,1,1},
{1,1,1,1,1,0,1,1,1,1,1},
{1,1,1,1,1,1,1,1,1,1,1}}
};

void setEventData()
{
    events=new Event*[MAX_EVENT];    //事件最大值设为1000
    for(int i=0;i<MAX_EVENT;i++)
        events[i]=nullptr;
    //0为空，1为墙，2为主角，3为上楼，4为下楼
    events[0]=new Null;
    events[1]=new Wall;
    events[2]=new Warrior;
    events[3]=new UpStairs;
    events[4]=new DownStairs;
    //11~20：钥匙
    events[11]=new Treasure("黄钥匙","Key_1",4,1);
    events[12]=new Treasure("蓝钥匙","Key_2",5,1);
    events[13]=new Treasure("红钥匙","Key_3",6,1);
    events[14]=new Treasure("绿钥匙","Key_4",7,1);
    //21~30：门
    events[21]=new Door("黄门","Door_1",1);
    events[22]=new Door("蓝门","Door_2",2);
    events[23]=new Door("红门","Door_3",3);
    events[24]=new Door("绿门","Door_4",4);
    //51~100：血瓶
    events[51]=new Treasure("红血瓶","Potion_1",1,200);
    events[52]=new Treasure("蓝血瓶","Potion_2",1,500);
    events[53]=new Treasure("黄血瓶","Potion_3",1,1000);
    events[54]=new Treasure("绿血瓶","Potion_4",1,2000);
    events[55]=new Treasure("大红血瓶","Potion_5",1,5000);
    events[56]=new Treasure("大蓝血瓶","Potion_6",1,10000);
    events[57]=new Treasure("大黄血瓶","Potion_7",1,20000);
    events[58]=new Treasure("大绿血瓶","Potion_8",1,40000);
    //101~150：宝石武器防具
    events[101]=new Treasure("红宝石","Jewel_Red",2,2);
    events[102]=new Treasure("蓝宝石","Jewel_Blue",3,2);
    events[103]=new Treasure("大红宝石","Jewel_Red_2",2,5);
    events[104]=new Treasure("大蓝宝石","Jewel_Blue_2",3,5);
    events[105]=new Treasure("超级红宝石","Jewel_Red_3",2,8);
    events[106]=new Treasure("超级蓝宝石","Jewel_Blue_3",3,8);
    events[107]=new Treasure("巨型红宝石","Jewel_Red_4",2,12);
    events[108]=new Treasure("巨型蓝宝石","Jewel_Blue_4",3,12);
    events[111]=new Treasure("铁剑","Weapon_1",2,10);
    events[112]=new Treasure("银剑","Weapon_2",2,20);
    events[113]=new Treasure("骑士剑","Weapon_3",2,40);
    events[114]=new Treasure("圣剑","Weapon_4",2,80);
    events[115]=new Treasure("神圣剑","Weapon_5",2,160);
    events[121]=new Treasure("铁盾","Shield_1",3,10);
    events[122]=new Treasure("银盾","Shield_2",3,20);
    events[123]=new Treasure("骑士盾","Shield_3",3,40);
    events[124]=new Treasure("圣盾","Shield_4",3,80);
    events[125]=new Treasure("神圣盾","Shield_5",3,160);
    //151~200：特殊物品
    events[151]=new Treasure("金币","Gold",8,200);
    events[152]=new Treasure("经验药水","Exp",9,200);
    events[153]=new Treasure("十字架","Cross",10,1);
    //201开始为怪物
    events[751]=new Monster("魔王","Monster_King",6049,2731,245532,0,0,0);
    events[201]=new Monster("绿色史莱姆","Monster_Silme_Green",18,1,40,1,1,0);
    events[202]=new Monster("红色史莱姆","Monster_Silme_Red",20,4,50,2,2,0);
    events[251]=new Monster("小蝙蝠","Monster_Bat_1",35,3,60,3,3,0);
    events[301]=new Monster("骷髅","Monster_Skeleton_1",55,0,100,5,5,0);
    events[203]=new Monster("黑色史莱姆","Monster_Silme_Black",40,10,120,6,6,0);
    events[302]=new Monster("骷髅兵","Monster_Skeleton_2",75,14,125,7,7,0);
    events[252]=new Monster("大蝙蝠","Monster_Bat_2",66,18,132,8,8,130);
    events[351]=new Monster("初级魔法师","Monster_Socrerer_1",30,35,180,10,10,64);
    events[401]=new Monster("丧尸","Monster_Zombie_1",75,35,400,11,11,0);
    events[303]=new Monster("骷髅队长","Monster_Skeleton_3",130,40,200,13,13,0);
    events[501]=new Monster("石怪","Monster_Stone_1",90,90,100,15,15,0);
    events[371]=new Monster("初级巫师","Monster_Witch_1",65,70,400,17,17,64);
    events[253]=new Monster("红蝙蝠","Monster_Bat_3",160,65,350,19,19,131);
    events[451]=new Monster("初级卫兵","Monster_Guarder_1",160,120,400,22,22,0);
    events[352]=new Monster("中级魔法师","Monster_Socrerer_2",100,140,500,26,26,64);
    events[204]=new Monster("史莱姆王","Monster_Silme_King",250,175,495,30,30,0);
    events[402]=new Monster("丧尸士兵","Monster_Zombie_2",283,166,1134,35,35,130);
    events[452]=new Monster("中级卫兵","Monster_Guarder_2",310,250,1250,40,40,0);
    events[551]=new Monster("双手剑士","Monster_Swordman",480,240,800,46,46,130);
    events[372]=new Monster("高级巫师","Monster_Witch_2",250,300,1075,53,53,64);
    events[552]=new Monster("骑士","Monster_Knight_1",660,400,1350,60,60,0);
    events[254]=new Monster("蝙蝠王","Monster_Bat_4",750,390,1300,68,68,132);
    events[353]=new Monster("高级魔法师","Monster_Socrerer_3",400,550,1600,78,78,64);
    events[601]=new Monster("战士","Monster_Soldier_1",1024,640,2200,88,88,0);
    events[553]=new Monster("骑士队长","Monster_Knight_2",1350,720,2400,98,98,0);
    events[453]=new Monster("高级卫兵","Monster_Guarder_3",1150,980,2500,110,110,0);
    events[502]=new Monster("铁怪","Monster_Stone_2",1125,1350,533,122,122,256);
    events[602]=new Monster("鬼战士","Monster_Soldier_2",1600,1250,4000,136,136,0);
    events[304]=new Monster("骷髅王","Monster_Skeleton_4",3300,1000,3000,150,150,0);
    events[356]=new Monster("暗黑法师","Monster_Socrerer_6",1750,1250,3500,167,167,64);
    events[554]=new Monster("暗黑骑士","Monster_Knight_3",2800,1800,5000,184,184,0);
    events[403]=new Monster("毒丧尸","Monster_Zombie_3",3200,2000,6400,202,202,0);
    events[354]=new Monster("白衣武士","Monster_Socrerer_4",3200,2400,7200,222,222,0);
    events[651]=new Monster("水银人","Monster_Hydraman",3100,2725,12000,243,243,0);
    events[355]=new Monster("绿衣武士","Monster_Socrerer_5",3900,3000,12000,267,267,0);
    events[555]=new Monster("剑王","Monster_Swordking",3600,2700,7200,289,289,134);
    events[701]=new Monster("吸血鬼","Monster_Vampire",5000,3000,20000,300,300,0);

    events[901]=new Monster_Guard((Monster*)events[354],0);
    events[902]=new Monster_Guard((Monster*)events[353],1);
    events[903]=new Monster_Guard((Monster*)events[453],2);
    events[904]=new Monster_Guard((Monster*)events[453],3);
    events[905]=new Monster_Guard((Monster*)events[353],4);
    events[906]=new Monster_Guard((Monster*)events[552],5);
    events[907]=new Monster_Guard((Monster*)events[304],6);
    events[908]=new Monster_Guard((Monster*)events[403],6);
    events[911]=new Monster_Guard((Monster*)events[555],11);

    events[951]=new Guard_Door(0,4);
    events[952]=new Guard_Door(1,2);
    events[953]=new Guard_Door(2,2);
    events[954]=new Guard_Door(3,2);
    events[955]=new Guard_Door(4,2);
    events[956]=new Guard_Door(5,2);
    events[957]=new Guard_Door(6,4);
    events[961]=new Holy_Water(11,2);

    //设置事件id
    for(int i=0;i<MAX_EVENT;i++)
    {
        if(events[i]!=nullptr)
            events[i]->set_id(i);
    }
    //设置楼层数据
    floors=new Floor[MAX_FLOOR];
    setFloorData();
    //获取统计信息
    for(int i=0;i<MAX_FLOOR;i++)
    {
        for(int j=0;j<MAX_X;j++)
        {
            for(int k=0;k<MAX_Y;k++)
            {
                stat_all_event[floor0[i][j][k]]++;
            }
        }
    }
    stat_all_hp=200*stat_all_event[51]+
                500*stat_all_event[52]+
                1000*stat_all_event[53]+
                2000*stat_all_event[54]+
                5000*stat_all_event[55]+
                10000*stat_all_event[56]+
                20000*stat_all_event[57]+
                40000*stat_all_event[58];
    stat_all_atk=2*stat_all_event[101]+5*stat_all_event[103]+8*stat_all_event[105]+12*stat_all_event[107]+10*stat_all_event[111]+
                 20*stat_all_event[112]+40*stat_all_event[113]+80*stat_all_event[114]+160*stat_all_event[115];
    stat_all_def=2*stat_all_event[102]+5*stat_all_event[104]+8*stat_all_event[106]+12*stat_all_event[108]+10*stat_all_event[121]+
                 20*stat_all_event[122]+40*stat_all_event[123]+80*stat_all_event[124]+160*stat_all_event[125];
    for(int j=200;j<950;j++)
    {
        if(stat_all_event[j]!=0)
        {
            stat_all_gold+=stat_all_event[j]*events[j]->get_gold();
            stat_all_exp+=stat_all_event[j]*events[j]->get_exp();
            stat_all_monster+=stat_all_event[j];
        }
    }
    stat_all_gold+=stat_all_event[151]*200;
    stat_all_exp+=stat_all_event[152]*200;
}
void setFloorData()
{
    //楼层数据
    int **data_reader=new int*[MAX_X];
    for(int i=0;i<MAX_X;i++)
        data_reader[i]=new int[MAX_Y];
    for(int z=0;z<MAX_FLOOR;z++)
    {
        for(int i=0;i<MAX_X;i++)
        {
            for(int j=0;j<MAX_Y;j++)
                data_reader[i][j]=floor0[z][j][i];    //将矩阵转置，方便查看
        }
        floors[z].setData(data_reader);
    }
    curr_floor=&floors[0];
}
